{% extends "base.html" %}
{% block content %}

<div class="container mt-5">
    <h2 class="mb-4">My Applications</h2>

    {% if applications %}
        <div class="list-group">
            {% for app in applications %}
                <a href="{% url 'jobs:job_detail' app.job.id %}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                    <div>
                        <strong>{{ app.job.title }}</strong> at {{ app.job.company }}
                        <br>
                        <small class="text-muted">Applied on {{ app.applied_at|date:"d M Y H:i" }}</small>
                    </div>

                    <div class="text-end">
                        <!-- Status -->
                        {% if app.status == 'PENDING' %}
                            <span class="badge bg-warning mb-1">Pending</span>
                        {% elif app.status == 'SHORTLISTED' %}
                            {% if app.meeting_status == 'SCHEDULED' and app.meeting_datetime %}
                                <span class="badge bg-primary mb-1">Meeting Scheduled</span>
                                <br>
                                <small>{{ app.meeting_datetime|date:"d M Y H:i" }}</small>
                            {% else %}
                                <span class="badge bg-success mb-1">Shortlisted</span>
                            {% endif %}
                        {% elif app.status == 'REJECTED' %}
                            <span class="badge bg-danger mb-1">Rejected</span>
                        {% endif %}
                    </div>
                </a>
            {% endfor %}
        </div>
    {% else %}
        <p class="text-muted text-center mt-4">You have not applied to any jobs yet.</p>
    {% endif %}
</div>

{% endblock %}
